{% extends 'base.html' %}
{% load static %}

{% block title %}Изменить контрагента{% endblock %}

{% block content %}
<h1>Изменить контрагента</h1>
<form id="client-form" method="POST">
  {% csrf_token %}
  {{ form.as_p }}
  <button id="edit-button" type="button">Разрешить редактирование</button>
  <button type="submit" disabled>Сохранить</button>
</form>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('client-form');
    var inputs = form.getElementsByTagName('input');
    var editButton = document.getElementById('edit-button');

    // Блокируем все поля формы по умолчанию
    for (var i = 0; i < inputs.length; i++) {
      inputs[i].setAttribute('disabled', 'disabled');
    }

    // Обработчик клика на кнопке "Разрешить редактирование"
    editButton.addEventListener('click', function() {
      // Разблокируем все поля формы
      for (var i = 0; i < inputs.length; i++) {
        inputs[i].removeAttribute('disabled');
      }
      // Включаем кнопку "Сохранить"
      form.querySelector('button[type="submit"]').removeAttribute('disabled');
    });
  });
</script>
{% endblock %}
